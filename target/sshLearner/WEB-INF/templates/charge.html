<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title>Zegva - Responsive Admin & Dashboard Template | Themesdesign</title>
    <meta content="Responsive admin theme build on top of Bootstrap 4" name="description">
    <meta content="Themesdesign" name="author">
    <link rel="shortcut icon" href="assets/images/favicon.ico">

    <link th:href="@{/static/css/bootstrap-datepicker.min.css}" rel="stylesheet">

    <link th:href="@{/static/css/bootstrap.min.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/static/css/metismenu.min.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/static/css/icons.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/static/css/style.css}" rel="stylesheet" type="text/css">

</head>

<body>
    <div class="accountbg"></div>

    <!-- Begin page -->
    <div class="home-btn d-none d-sm-block">
        <a href="/newPage" class="text-white"><i class="mdi mdi-home h1"></i></a>
    </div>

    <div class="wrapper-page">

        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-5">
                    <div class="card card-pages mt-4">
                        <div class="card-body">
<!--                            <div class="text-center mt-0 mb-3">-->
<!--                                <a href="index.html" class="logo logo-admin">-->
<!--                                    <img th:src="@{/static/picture/logo-dark.png}" class="mt-3" alt="" height="26"></a>-->
<!--                            </div>-->

<!--                            <form class="form-horizontal mt-4" action="index.html">-->

                                <div class="user-thumb text-center">
                                    <img th:src="@{/static/picture/user-2.jpg}" class="rounded-circle thumb-lg img-thumbnail mx-auto d-block img-fluid" alt="thumbnail">
                                    <h5 class="text-dark text-center mt-3">Hi ! <span th:text="${username}"></span> 当前余额：<span th:text="${money}"></span> </h5>
                                    <p class="text-muted w-75 mx-auto mb-4">为您的股票人生助力吧！</p>
                                </div>

                                <div class="form-group">
                                    <div class="col-12">
                                        <label for="money">充值金额</label>
                                        <input class="form-control" type="text" required="true" id="money" placeholder="请输入充值金额..">
                                    </div>
                                </div>

                                <div class="form-group text-center mt-3">
                                    <div class="col-12">
                                        <button onclick="charge()" class="btn btn-primary btn-block waves-effect waves-light" type="submit">确认充值</button>
                                    </div>
                                </div>

<!--                                <div class="form-group mb-1">-->
<!--                                    <div class="col-12 mt-2 text-center">-->
<!--                                        <a href="pages-login.html" class="text-muted">Not you?</a>-->
<!--                                    </div>-->
<!--                                </div>-->

<!--                            </form>-->

                        </div>

                    </div>

                </div>
            </div>
            <!-- end row -->
        </div>
    </div>

    <script th:src="@{/static/js/jquery.min.js}"></script>
    <script th:src="@{/static/js/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/static/js/jquery.slimscroll.js}"></script>
    <script th:src="@{/static/js/waves.min.js}"></script>

    <script th:src="@{/static/js/apexcharts.min.js}"></script>
    <script th:src="@{/static/js/bootstrap-datepicker.min.js}"></script>

    <!-- App js -->
    <script th:src="@{/static/js/app.js}"></script>

</body>
<script>
    function charge() {
        $.ajax({
            url: "/user/dealCharge",
            type: 'GET',
            data: {
                money: $('#money').val(),
            },
            contentType: 'application/json;charset=utf-8',
            dataType: "text",
            success: function(data){
                if(data == "success") {
                    alert("充值成功！");
                    // window.location.href = "/newPage";
                }else {
                    alert("充值失败！");
                    // 页面刷新
                }
                window.location.reload();
            },
            error: function (xhr, textStatus, errorThrown) {
                /*错误信息处理*/
                alert("进入error---");
                alert("状态码：" + xhr.status);
                alert("状态:"+ xhr.readyState);//当前状态,0-未初始化，1-正在载入，2-已经载入，3-数据进行交互，4-完成。
                alert("错误信息:"+ xhr.statusText );
                alert("返回响应信息："+ xhr.responseText );//这里是详细的信息
                alert("请求状态："+textStatus);
                alert(errorThrown);
                alert("请求失败");
            },
        });
    }
</script>
</html>